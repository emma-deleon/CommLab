let headline = document.querySelector(".headline");

function changeText() {
    headline.innerText = "Hello, World!";
}

function start() {
    document.querySelector(".start-button").remove();

    let moreButtons = document.createElement("button");
    moreButtons.className = "temporaryButton";
    moreButtons.innerText = "click me!";
    moreButtons.style.position = "absolute";
    let randTop = Math.random()*(innerHeight-20);
    let randLeft = Math.random()*(innerWidth-20);
    moreButtons.style.top = randTop+"px";
    moreButtons.style.left = randLeft+"px";

    moreButtons.onclick = function () { drop(moreButtons); };
    document.body.append(moreButtons);

    let moreButtons2 = document.createElement("button");
    moreButtons2.className = "temporaryButton";
    moreButtons2.innerText = "click me!";
    moreButtons2.style.position = "absolute";
    let randTop2 = Math.random()*(innerHeight-20);
    let randLeft2 = Math.random()*(innerWidth-20);
    moreButtons2.style.top = randTop2+"px";
    moreButtons2.style.left = randLeft2+"px";

    moreButtons2.onclick = function () { drop(moreButtons2); };
    document.body.append(moreButtons2);

    let moreButtons3 = document.createElement("button");
    moreButtons3.className = "temporaryButton";
    moreButtons3.innerText = "click me!";
    moreButtons3.style.position = "absolute";
    let randTop3 = Math.random()*(innerHeight-20);
    let randLeft3 = Math.random()*(innerWidth-20);
    moreButtons3.style.top = randTop3+"px";
    moreButtons3.style.left = randLeft3+"px";

    moreButtons3.onclick = function () { drop(moreButtons3); };
    document.body.append(moreButtons3);

    let moreButtons4 = document.createElement("button");
    moreButtons4.className = "temporaryButton";
    moreButtons4.innerText = "click me!";
    moreButtons4.style.position = "absolute";
    let randTop4 = Math.random()*(innerHeight-20);
    let randLeft4 = Math.random()*(innerWidth-20);
    moreButtons4.style.top = randTop4+"px";
    moreButtons4.style.left = randLeft4+"px";

    moreButtons4.onclick = function () { drop(moreButtons4); };
    document.body.append(moreButtons4);

    let moreButtons5 = document.createElement("button");
    moreButtons5.className = "temporaryButton";
    moreButtons5.innerText = "click me!";
    moreButtons5.style.position = "absolute";
    let randTop5 = Math.random()*(innerHeight-20);
    let randLeft5 = Math.random()*(innerWidth-20);
    moreButtons5.style.top = randTop5+"px";
    moreButtons5.style.left = randLeft5+"px";

    moreButtons5.onclick = function () { drop(moreButtons5); };
    document.body.append(moreButtons5);

    let moreButtons6 = document.createElement("button");
    moreButtons6.className = "temporaryButton";
    moreButtons6.innerText = "click me!";
    moreButtons6.style.position = "absolute";
    let randTop6 = Math.random()*(innerHeight-20);
    let randLeft6 = Math.random()*(innerWidth-20);
    moreButtons6.style.top = randTop6+"px";
    moreButtons6.style.left = randLeft6+"px";

    moreButtons6.onclick = function () { drop(moreButtons6); };
    document.body.append(moreButtons6);

    let moreButtons7 = document.createElement("button");
    moreButtons7.className = "temporaryButton";
    moreButtons7.innerText = "click me!";
    moreButtons7.style.position = "absolute";
    let randTop7 = Math.random()*(innerHeight-20);
    let randLeft7 = Math.random()*(innerWidth-20);
    moreButtons7.style.top = randTop7+"px";
    moreButtons7.style.left = randLeft7+"px";

    moreButtons7.onclick = function () { drop(moreButtons7); };
    document.body.append(moreButtons7);


    let moreButtons8 = document.createElement("button");
    moreButtons8.className = "temporaryButton";
    moreButtons8.innerText = "click me!";
    moreButtons8.style.position = "absolute";
    let randTop8 = Math.random()*(innerHeight-20);
    let randLeft8 = Math.random()*(innerWidth-20);
    moreButtons8.style.top = randTop8+"px";
    moreButtons8.style.left = randLeft8+"px";

    moreButtons8.onclick = function () { drop(moreButtons8); };
    document.body.append(moreButtons8);

    let moreButtons9 = document.createElement("button");
    moreButtons9.className = "temporaryButton";
    moreButtons9.innerText = "click me!";
    moreButtons9.style.position = "absolute";
    let randTop9 = Math.random()*(innerHeight-20);
    let randLeft9 = Math.random()*(innerWidth-20);
    moreButtons9.style.top = randTop9+"px";
    moreButtons9.style.left = randLeft9+"px";

    moreButtons9.onclick = function () { drop(moreButtons9); };
    document.body.append(moreButtons9);

    let moreButtons10 = document.createElement("button");
    moreButtons10.className = "temporaryButton";
    moreButtons10.innerText = "click me!";
    moreButtons10.style.position = "absolute";
    let randTop10 = Math.random()*(innerHeight-20);
    let randLeft10 = Math.random()*(innerWidth-20);
    moreButtons10.style.top = randTop10+"px";
    moreButtons10.style.left = randLeft10+"px";

    moreButtons10.onclick = function () { drop(moreButtons10); };
    document.body.append(moreButtons10);
    

    let moreButtons11 = document.createElement("button");
    moreButtons11.className = "temporaryButton";
    moreButtons11.innerText = "click me!";
    moreButtons11.style.position = "absolute";
    let randTop11 = Math.random()*(innerHeight-20);
    let randLeft11 = Math.random()*(innerWidth-20);
    moreButtons11.style.top = randTop11+"px";
    moreButtons11.style.left = randLeft11+"px";

    moreButtons11.onclick = function () { drop(moreButtons11); };
    document.body.append(moreButtons11);

    let moreButtons12 = document.createElement("button");
    moreButtons12.className = "temporaryButton";
    moreButtons12.innerText = "click me!";
    moreButtons12.style.position = "absolute";
    let randTop12 = Math.random()*(innerHeight-20);
    let randLeft12 = Math.random()*(innerWidth-20);
    moreButtons12.style.top = randTop12+"px";
    moreButtons12.style.left = randLeft12+"px";

    moreButtons12.onclick = function () { drop(moreButtons12); };
    document.body.append(moreButtons12);

    let moreButtons13 = document.createElement("button");
    moreButtons13.className = "temporaryButton";
    moreButtons13.innerText = "click me!";
    moreButtons13.style.position = "absolute";
    let randTop13 = Math.random()*(innerHeight-20);
    let randLeft13 = Math.random()*(innerWidth-20);
    moreButtons13.style.top = randTop13+"px";
    moreButtons13.style.left = randLeft13+"px";

    moreButtons13.onclick = function () { drop(moreButtons13); };
    document.body.append(moreButtons13);

    let moreButtons14 = document.createElement("button");
    moreButtons14.className = "temporaryButton";
    moreButtons14.innerText = "click me!";
    moreButtons14.style.position = "absolute";
    let randTop14 = Math.random()*(innerHeight-20);
    let randLeft14 = Math.random()*(innerWidth-20);
    moreButtons14.style.top = randTop14+"px";
    moreButtons14.style.left = randLeft14+"px";

    moreButtons14.onclick = function () { drop(moreButtons14); };
    document.body.append(moreButtons14);

    let moreButtons15 = document.createElement("button");
    moreButtons15.className = "temporaryButton";
    moreButtons15.innerText = "click me!";
    moreButtons15.style.position = "absolute";
    let randTop15 = Math.random()*(innerHeight-20);
    let randLeft15 = Math.random()*(innerWidth-20);
    moreButtons15.style.top = randTop15+"px";
    moreButtons15.style.left = randLeft15+"px";

    moreButtons15.onclick = function () { drop(moreButtons15); };
    document.body.append(moreButtons15);

    let moreButtons16 = document.createElement("button");
    moreButtons16.className = "temporaryButton";
    moreButtons16.innerText = "click me!";
    moreButtons16.style.position = "absolute";
    let randTop16 = Math.random()*(innerHeight-20);
    let randLeft16 = Math.random()*(innerWidth-20);
    moreButtons16.style.top = randTop16+"px";
    moreButtons16.style.left = randLeft16+"px";

    moreButtons16.onclick = function () { drop(moreButtons16); };
    document.body.append(moreButtons16);

    let moreButtons17 = document.createElement("button");
    moreButtons17.className = "temporaryButton";
    moreButtons17.innerText = "click me!";
    moreButtons17.style.position = "absolute";
    let randTop17 = Math.random()*(innerHeight-20);
    let randLeft17 = Math.random()*(innerWidth-20);
    moreButtons17.style.top = randTop17+"px";
    moreButtons17.style.left = randLeft17+"px";

    moreButtons17.onclick = function () { drop(moreButtons17); };
    document.body.append(moreButtons17);

    let moreButtons18 = document.createElement("button");
    moreButtons18.className = "temporaryButton";
    moreButtons18.innerText = "click me!";
    moreButtons18.style.position = "absolute";
    let randTop18 = Math.random()*(innerHeight-20);
    let randLeft18 = Math.random()*(innerWidth-20);
    moreButtons18.style.top = randTop18+"px";
    moreButtons18.style.left = randLeft18+"px";

    moreButtons18.onclick = function () { drop(moreButtons18); };
    document.body.append(moreButtons18);

    let moreButtons19 = document.createElement("button");
    moreButtons19.className = "temporaryButton";
    moreButtons19.innerText = "click me!";
    moreButtons19.style.position = "absolute";
    let randTop19 = Math.random()*(innerHeight-20);
    let randLeft19 = Math.random()*(innerWidth-20);
    moreButtons19.style.top = randTop19+"px";
    moreButtons19.style.left = randLeft19+"px";

    moreButtons19.onclick = function () { drop(moreButtons19); };
    document.body.append(moreButtons19);

    let moreButtons20 = document.createElement("button");
    moreButtons20.className = "temporaryButton";
    moreButtons20.innerText = "click me!";
    moreButtons20.style.position = "absolute";
    let randTop20 = Math.random()*(innerHeight-20);
    let randLeft20 = Math.random()*(innerWidth-20);
    moreButtons20.style.top = randTop20+"px";
    moreButtons20.style.left = randLeft20+"px";

    moreButtons20.onclick = function () { drop(moreButtons20); };
    document.body.append(moreButtons20);

    let moreButtons21 = document.createElement("button");
    moreButtons21.className = "temporaryButton";
    moreButtons21.innerText = "click me!";
    moreButtons21.style.position = "absolute";
    let randTop21 = Math.random()*(innerHeight-20);
    let randLeft21 = Math.random()*(innerWidth-20);
    moreButtons21.style.top = randTop21+"px";
    moreButtons21.style.left = randLeft21+"px";

    moreButtons21.onclick = function () { drop(moreButtons21); };
    document.body.append(moreButtons21);

    let moreButtons22 = document.createElement("button");
    moreButtons22.className = "temporaryButton";
    moreButtons22.innerText = "click me!";
    moreButtons22.style.position = "absolute";
    let randTop22 = Math.random()*(innerHeight-20);
    let randLeft22 = Math.random()*(innerWidth-20);
    moreButtons22.style.top = randTop22+"px";
    moreButtons22.style.left = randLeft22+"px";

    moreButtons22.onclick = function () { drop(moreButtons22); };
    document.body.append(moreButtons22);

    let moreButtons23 = document.createElement("button");
    moreButtons23.className = "temporaryButton";
    moreButtons23.innerText = "click me!";
    moreButtons23.style.position = "absolute";
    let randTop23 = Math.random()*(innerHeight-20);
    let randLeft23 = Math.random()*(innerWidth-20);
    moreButtons23.style.top = randTop23+"px";
    moreButtons23.style.left = randLeft23+"px";

    moreButtons23.onclick = function () { drop(moreButtons23); };
    document.body.append(moreButtons23);

    let moreButtons24 = document.createElement("button");
    moreButtons24.className = "temporaryButton";
    moreButtons24.innerText = "click me!";
    moreButtons24.style.position = "absolute";
    let randTop24 = Math.random()*(innerHeight-20);
    let randLeft24 = Math.random()*(innerWidth-20);
    moreButtons24.style.top = randTop24+"px";
    moreButtons24.style.left = randLeft24+"px";

    moreButtons24.onclick = function () { drop(moreButtons24); };
    document.body.append(moreButtons24);

    let moreButtons25 = document.createElement("button");
    moreButtons25.className = "temporaryButton";
    moreButtons25.innerText = "click me!";
    moreButtons25.style.position = "absolute";
    let randTop25 = Math.random()*(innerHeight-20);
    let randLeft25 = Math.random()*(innerWidth-20);
    moreButtons25.style.top = randTop25+"px";
    moreButtons25.style.left = randLeft25+"px";

    moreButtons25.onclick = function () { drop(moreButtons25); };
    document.body.append(moreButtons25);

    let moreButtonsRED = document.createElement("button");
    moreButtonsRED.innerText = "click me?";
    moreButtonsRED.style.position = "absolute";
    let randTopRED = Math.random()*(innerHeight-20);
    let randLeftRED = Math.random()*(innerWidth-20);
    moreButtonsRED.style.top = randTopRED+"px";
    moreButtonsRED.style.left = randLeftRED+"px";


    // moreButtonsRED.addEventListener('click', () => {
    //     flash();
    //     removeTemporaryButtons();});
    // document.body.append(moreButtonsRED);}

    moreButtonsRED.addEventListener('click', (thisButton) => {
        flash();
        removeTemporaryButtons();
        thisButton.currentTarget.remove();
        middle()});
    document.body.append(moreButtonsRED);}

function drop(element) {
    element.classList.toggle("drop");
}

function flash(callback) { 
    const body = document.body;
    body.classList.add("flash");

    function onEnd() {
        body.classList.remove("flash");
        body.removeEventListener("animationend", onEnd);
        
        if (callback) {
            callback(); //play next animation
        }
    }
    body.addEventListener("animationend", onEnd);
}

function removeTemporaryButtons() {
    document.querySelectorAll(".temporaryButton").forEach(btn => btn.remove());
}

function dropTemporaryButtons() {
    document.querySelectorAll(".temporaryButton").forEach(btn => btn.classList.remove("fly"));
    document.querySelectorAll(".temporaryButton").forEach(btn => btn.classList.add("drop"));
    // removeTemporaryButtons();
}


function middle() {
    let moreButtons = document.createElement("button");
    moreButtons.classList.add("temporaryButton", "fly");
    moreButtons.innerText = "dont touch me";
    moreButtons.style.position = "absolute";
    let randTop = Math.random()*(innerHeight-20);
    let randLeft = Math.random()*(innerWidth-40);
    moreButtons.style.top = randTop+"px";
    moreButtons.style.left = randLeft+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons.onclick = function () { ouch(moreButtons); };
    document.body.append(moreButtons);

    let moreButtons1 = document.createElement("button");
    moreButtons1.classList.add("temporaryButton", "fly");
    moreButtons1.innerText = "dont touch me";
    moreButtons1.style.position = "absolute";
    let randTop1 = Math.random()*(innerHeight-20);
    let randLeft1 = Math.random()*(innerWidth-40);
    moreButtons1.style.top = randTop1+"px";
    moreButtons1.style.left = randLeft1+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons1.onclick = function () { ouch(moreButtons1); };
    document.body.append(moreButtons1);

    let moreButtons2 = document.createElement("button");
    moreButtons2.classList.add("temporaryButton", "fly");
    moreButtons2.innerText = "dont touch me";
    moreButtons2.style.position = "absolute";
    let randTop2 = Math.random()*(innerHeight-20);
    let randLeft2 = Math.random()*(innerWidth-40);
    moreButtons2.style.top = randTop2+"px";
    moreButtons2.style.left = randLeft2+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons2.onclick = function () { ouch(moreButtons2); };
    document.body.append(moreButtons2);

    let moreButtons3 = document.createElement("button");
    moreButtons3.classList.add("temporaryButton", "fly");
    moreButtons3.innerText = "dont touch me";
    moreButtons3.style.position = "absolute";
    let randTop3 = Math.random()*(innerHeight-20);
    let randLeft3 = Math.random()*(innerWidth-40);
    moreButtons3.style.top = randTop3+"px";
    moreButtons3.style.left = randLeft3+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons3.onclick = function () { ouch(moreButtons3); };
    document.body.append(moreButtons3);

    let moreButtons4 = document.createElement("button");
    moreButtons4.classList.add("temporaryButton", "fly");
    moreButtons4.innerText = "dont touch me";
    moreButtons4.style.position = "absolute";
    let randTop4 = Math.random()*(innerHeight-20);
    let randLeft4 = Math.random()*(innerWidth-40);
    moreButtons4.style.top = randTop4+"px";
    moreButtons4.style.left = randLeft4+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons4.onclick = function () { ouch(moreButtons4); };
    document.body.append(moreButtons4);


    let moreButtons5 = document.createElement("button");
    moreButtons5.classList.add("temporaryButton", "fly");
    moreButtons5.innerText = "dont touch me";
    moreButtons5.style.position = "absolute";
    let randTop5 = Math.random()*(innerHeight-20);
    let randLeft5 = Math.random()*(innerWidth-40);
    moreButtons5.style.top = randTop5+"px";
    moreButtons5.style.left = randLeft5+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons5.onclick = function () { ouch(moreButtons5); };
    document.body.append(moreButtons5);
    
    let moreButtons6 = document.createElement("button");
    moreButtons6.classList.add("temporaryButton", "fly");
    moreButtons6.innerText = "dont touch me";
    moreButtons6.style.position = "absolute";
    let randTop6 = Math.random()*(innerHeight-20);
    let randLeft6 = Math.random()*(innerWidth-40);
    moreButtons6.style.top = randTop6+"px";
    moreButtons6.style.left = randLeft6+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons6.onclick = function () { ouch(moreButtons6); };
    document.body.append(moreButtons6);

    let moreButtons7 = document.createElement("button");
    moreButtons7.classList.add("temporaryButton", "fly");
    moreButtons7.innerText = "dont touch me";
    moreButtons7.style.position = "absolute";
    let randTop7 = Math.random()*(innerHeight-20);
    let randLeft7 = Math.random()*(innerWidth-40);
    moreButtons7.style.top = randTop7+"px";
    moreButtons7.style.left = randLeft7+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons7.onclick = function () { ouch(moreButtons7); };
    document.body.append(moreButtons7);

    let moreButtons8 = document.createElement("button");
    moreButtons8.classList.add("temporaryButton", "fly");
    moreButtons8.innerText = "dont touch me";
    moreButtons8.style.position = "absolute";
    let randTop8 = Math.random()*(innerHeight-20);
    let randLeft8 = Math.random()*(innerWidth-40);
    moreButtons8.style.top = randTop8+"px";
    moreButtons8.style.left = randLeft8+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons8.onclick = function () { ouch(moreButtons8); };
    document.body.append(moreButtons8);

    let moreButtons9 = document.createElement("button");
    moreButtons9.classList.add("temporaryButton", "fly");
    moreButtons9.innerText = "dont touch me";
    moreButtons9.style.position = "absolute";
    let randTop9 = Math.random()*(innerHeight-20);
    let randLeft9 = Math.random()*(innerWidth-40);
    moreButtons9.style.top = randTop9+"px";
    moreButtons9.style.left = randLeft9+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons9.onclick = function () { ouch(moreButtons9); };
    document.body.append(moreButtons9);

    let moreButtons10 = document.createElement("button");
    moreButtons10.classList.add("temporaryButton", "fly");
    moreButtons10.innerText = "dont touch me";
    moreButtons10.style.position = "absolute";
    let randTop10 = Math.random()*(innerHeight-20);
    let randLeft10 = Math.random()*(innerWidth-40);
    moreButtons10.style.top = randTop10+"px";
    moreButtons10.style.left = randLeft10+"px";

    // moreButtons.onclick = function () { drop(moreButtons); };
    moreButtons10.onclick = function () { ouch(moreButtons10); };
    document.body.append(moreButtons10);

    let moreButtonsRED = document.createElement("button");
    // moreButtonsRED.className = "temporaryButton";
    moreButtonsRED.classList.add("fly");
    moreButtonsRED.innerText = "dont touch me!!";
    moreButtonsRED.style.position = "absolute";
    let randTopRED = Math.random()*(innerHeight-20);
    let randLeftRED = Math.random()*(innerWidth-40);
    moreButtonsRED.style.top = randTopRED+"px";
    moreButtonsRED.style.left = randLeftRED+"px";

    // moreButtonsRED.onclick = function () {  flash(); };
    document.body.append(moreButtonsRED);
    moreButtonsRED.addEventListener('click', (thisButton) => {
        dropTemporaryButtons();
        thisButton.currentTarget.style.zIndex = 5;
        thisButton.currentTarget.style.color = "red";
        thisButton.currentTarget.style.backgroundColor = "black";
        thisButton.currentTarget.classList.remove("fly");
        thisButton.currentTarget.classList.add("noEvents");
        thisButton.currentTarget.innerText = "I SAID DONT TOUCH ME";

        const bloodDiv = document.createElement("div");
        bloodDiv.classList.add("blood");
        document.body.appendChild(bloodDiv);

        thisButton.currentTarget.addEventListener('mouseover', () => {
            const island = document.querySelector(".island");
            bloodDiv.classList.add("slide-up");
            island.classList.add("island-slide");
        });

        // thisButton.currentTarget.addEventListener('mouseout', () => {
        //     bloodDiv.classList.remove("slide-up");
        // });

        flash(() => {
            rainTransition(3000);
        });

        setTimeout(() => {
            removeTemporaryButtons();
        }, 2000); 
    }, { once: true })}

      
function replaceImg() {
    const islandImage = document.querySelector(".island img");
  if (!islandImage) return;
  islandImage.src = "explosion.gif";   // swaps island.png -> explosion.gif
  islandImage.alt = "Explosion";
}

function ouch(element) {
    element.innerText = "ouch!"
    element.style.backgroundColor = "red"
}

function rainTransition(durationMs) {

    const durationSec = durationMs / 1000;
    // document.body.classList.remove('fade');

    // document.body.style.transition = 'none';

    document.body.style.transition = `background-color ${durationSec}s ease`;
    setTimeout(() => {
        document.body.classList.add('fade');
    }, 20); 

    function createRaindrop() {
        const raindrop = document.createElement('div');
        raindrop.classList.add('raindrop');

        raindrop.style.left = Math.random() * innerWidth + 'px';

        const fallDuration = Math.random() * 1 + 0.5;
        raindrop.style.animationDuration = fallDuration + 's';

        document.body.appendChild(raindrop);

        setTimeout(() => {
            raindrop.remove();
        }, fallDuration * 1000);
    }
    
    const rainInterval = setInterval(createRaindrop, 10)
    // setTimeout(() => {
    //             clearInterval(rainInterval);
    //             document.body.style.transition = '';

    //         }, durationMs);
        }